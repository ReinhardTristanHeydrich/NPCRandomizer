<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <title>NPC Randomizador</title>
  <style>
    body {
      background-color: #121212;
      color: white;
      font-family: sans-serif;
      text-align: center;
      padding: 30px;
    }

    button {
      padding: 15px 30px;
      font-size: 18px;
      background: #333;
      color: white;
      border: none;
      cursor: pointer;
    }

    .resultado {
      margin-top: 20px;
      white-space: pre-line;
      font-size: 16px;
    }
  </style>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#121212">
  <link rel="icon" href="icons/icon-192.png">
</head>

<body>
  <h1>NPC Randomizador</h1>
  <button onclick="gerarNPC()">Randomizar</button>
  <div class="resultado" id="resultado"></div>

  <!-- param -->
  <script src="param/classes.js"></script>
  <script src="param/raças.js"></script>

  <script>
  const d20     = () => Math.floor(Math.random() * 20) + 1;
  const dRaça   = () => Raças[Math.floor(Math.random() * Raças.length)];
  const dClasse = () => Classes[Math.floor(Math.random() * Classes.length)];

    

 function gerarNPC() {

  const [dMulti, dProdi, dHibrido, dSocial] = [d20(), d20(), d20(), d20()];
  const multiclass = dMulti   >= 19 ? "Sim" : "Não";
  const prodigio   = dProdi  === 20 ? "Sim" : "Não";
  const hibrido    = dHibrido >= 18 ? "Sim" : "Não";


  let classeSocial = "";
  switch (true) {
    case dSocial === 1: classeSocial = "Escravo"; break;
    case dSocial <= 15: classeSocial = "Camponês"; break;
    case dSocial <= 19: classeSocial = "Burguesia"; break;
    case dSocial === 20: classeSocial = "Elite"; break;
  }

  let racas = [dRaça()];
  if (hibrido === "Sim") {
    let novaRaça;
    do {
      novaRaça = dRaça();
    } while (racas.includes(novaRaça));
    racas.push(novaRaça);
  }

  // Classes
  let nClasses = 1;
  if (multiclass === "Sim") {
    nClasses = dMulti === 20 ? 3 : 2;
  }
  const classes = [];
  while (classes.length < nClasses) {
    let novaClasse = dClasse();
    if (!classes.includes(novaClasse)) classes.push(novaClasse);
  }

  const resultado = `
Multiclasse: ${multiclass} (${dMulti})
Prodígio: ${prodigio} (${dProdi})
Híbrido: ${hibrido} (${dHibrido})
Classe Social: ${classeSocial} (${dSocial})

Raça${racas.length > 1 ? "s" : ""}: ${racas.join(" / ")}
Classe${classes.length > 1 ? "s" : ""}: ${classes.join(" / ")}
`;

  document.getElementById("resultado").innerText = resultado;
}

  </script>
</body>

</html>